/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-03-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
(function(e){"use strict";e.fn.extend({customSelect:function(t){if(typeof document.body.style.maxHeight==="undefined"){return this}var n={customClass:"customSelect",mapClass:true,mapStyle:true},t=e.extend(n,t),r=t.customClass,i=function(t,n){var r=t.find(":selected"),i=n.children(":first"),o=r.html()||"&nbsp;";i.html(o);if(r.attr("disabled")){n.addClass(s("DisabledOption"))}else{n.removeClass(s("DisabledOption"))}setTimeout(function(){n.removeClass(s("Open"));e(document).off("mouseup.customSelect")},60)},s=function(e){return r+e};return this.each(function(){var n=e(this),o=e("<span />").addClass(s("Inner")),u=e("<span />");n.after(u.append(o));u.addClass(r);if(t.mapClass){u.addClass(n.attr("class"))}if(t.mapStyle){u.attr("style",n.attr("style"))}n.addClass("hasCustomSelect").on("render.customSelect",function(){i(n,u);n.css("width","");var e=parseInt(n.outerWidth(),10)-(parseInt(u.outerWidth(),10)-parseInt(u.width(),10));u.css({display:"inline-block"});var t=u.outerHeight();if(n.attr("disabled")){u.addClass(s("Disabled"))}else{u.removeClass(s("Disabled"))}o.css({width:e,display:"inline-block"});n.css({"-webkit-appearance":"menulist-button",width:u.outerWidth(),position:"absolute",opacity:0,height:t,fontSize:u.css("font-size")})}).on("change.customSelect",function(){u.addClass(s("Changed"));i(n,u)}).on("keyup.customSelect",function(e){if(!u.hasClass(s("Open"))){n.trigger("blur.customSelect");n.trigger("focus.customSelect")}else{if(e.which==13||e.which==27){i(n,u)}}}).on("mousedown.customSelect",function(){u.removeClass(s("Changed"))}).on("mouseup.customSelect",function(t){if(!u.hasClass(s("Open"))){if(e("."+s("Open")).not(u).length>0&&typeof InstallTrigger!=="undefined"){n.trigger("focus.customSelect")}else{u.addClass(s("Open"));t.stopPropagation();e(document).one("mouseup.customSelect",function(t){if(t.target!=n.get(0)&&e.inArray(t.target,n.find("*").get())<0){n.trigger("blur.customSelect")}else{i(n,u)}})}}}).on("focus.customSelect",function(){u.removeClass(s("Changed")).addClass(s("Focus"))}).on("blur.customSelect",function(){u.removeClass(s("Focus")+" "+s("Open"))}).on("mouseenter.customSelect",function(){u.addClass(s("Hover"))}).on("mouseleave.customSelect",function(){u.removeClass(s("Hover"))}).trigger("render.customSelect")})}})})(jQuery)